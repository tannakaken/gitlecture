\documentclass[12pt, unicode]{beamer}
\usetheme{CambridgeUS}
\usepackage{luatexja}

\title{Gitによるバージョン管理入門}
\author{田中 健策（株式会社RAKUDO）}
\date[2020/12/25]{第四回}

\begin{document}

\frame{\maketitle}

\begin{frame}{前回までのあらすじ}

conflictが起こらないように、ブランチを分けて開発をすることにしました。
しかし、それらを統合しないと始まリマ戦。

そのためには

\begin{itemize}
\item 各ブランチで独立して開発ができて、
\item 統合が楽で（人手を介さず、自動的にできる）
\item 結果がわかりやすい
\end{itemize}

ような手法が必要です。

それを
\begin{itemize}
\item LaTeXのソース分割
\item githubのプルリクエスト
\item github actions
\end{itemize}
によって構築してみましょう。

\end{frame}

\begin{frame}[fragile]{\LaTeX のソース分割 １}

複数人でLaTeXを書くときは、
ファイル分割をする必要です。

一番簡単なファイル分割は、
\verb|\input|
や
\verb|\include|
を使うものです。

しかしこれには、
単独のファイルでコンパイルできないという欠点があります。

LaTeXのコンパイルはそれなりの時間がかかるので、これは避けたいです
（コンパイルして結果を見るためだけに数秒かかるのは、執筆時に多大なストレスになります）。

\end{frame}
\begin{frame}{\LaTeX のソース分割 ２}

そこで、自分でマクロを各方法や、パッケージを使う方法など、
様々な方法が開発されています。

\begin{itemize}
\item 効率的なLaTeXファイル分割術 \url{https://qiita.com/wtsnjp/items/6ba3b8e12514d8a3bd41}
\item 分割したLaTeXファイルをsubfilesを使ってコンパイルする　\url{https://qiita.com/sankichi92/items/1e113fcf6cc045eb64f7}
\end{itemize}

今回は、二つ目のsubfilesパッケージを使います。
TeX Liveに含まれているが、もし各自の環境に含まれていなければインストールしておいてください。

また、書き方の例をWikiに書いて、exampleのファイルを用意しておくので、各自確認しておいてください。

\end{frame}


\begin{frame}{プルリクエスト}

良い仕組みを作っても、
もしメンバーの一部ががおかしなファイルをリポジトリーに加えてしまえば、
他の人までコンパイルできなくなって迷惑を被ります。

そうならないようにする仕組みが\textbf{プルリクエスト}です。

これはgitではなくGithubの機能です。

「レビューをして、問題ないことを確認したらマージ」
という作業をタスク化して、
やりとりを記録できるようにしてくれるのです。

\end{frame}
\begin{frame}{プルリクエストの流れ}

\begin{itemize}
\item Githubのリポジトリの上部のボタンでプルリクエストを作成
\item 担当者がレビューして、修正が不要ならマージされます
\item 修正が必要なら修正を依頼し、修正をpush後またレビュー
\item そもそもプルリクエスト自体が不要ならクローズされます
\end{itemize}

このような流れが関係者にオープンになり、
また記録されます。

またオープンなリポジトリなら、自由にプルリクエストが作成できるので、
自由に開発に参加することができます（もちろん担当者がプルリクエストのレビューを捌けるならではありますが）

\end{frame}

\begin{frame}{今回のプルリクエストの使い方}

\begin{itemize}
\item 定期的にmasterブランチを自分のブランチにmergeしておいて、masterの変更を取り入れてください。
\item 自分のブランチのLaTeX作成が終わったら、全体でコンパイルできることを確認します。
\item masterブランチへのプルリクエストを作成します。
\item 講師の田中が確認して、masterへmergeします。
\end{itemize}

\end{frame}
\begin{frame}{github actions}

githubなどのgithubホスティングサイトでは、
その性質上さまざまなイベントが起きます。

そのイベントを起点に、さまざまな処理を自動的に走らせるのが、
github actionsです（それ以外にwebhooksも同様の使い方ができます）。

今回はgithub actionsを使って、「masterブランチへの変更があったら、自動的にコンパイルしてpdfをダウンロード可能にする」
という仕組みを作ります。

これによって、現在のプロジェクトの進捗が可視化されます。

プログラミングや文章の執筆など、形がなくて進捗が見えにくいプロジェクトにおいて、これは重要です。

その仕組み自体は講師の田中が作るが、興味がある方はリポジトリー内でそのやり方を確認してください。

\end{frame}


\end{document}
